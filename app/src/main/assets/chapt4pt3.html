<h1 id="getting-a-result-from-an-activity" class="" style="text-align: justify;">Getting a Result from an Activity</h1>
<div class="devsite-article-body clearfix
      ">
<p style="text-align: justify;">Starting another activity doesn't have to be one-way. You can also start another activity and receive a result back. To receive a result, call&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,%20int)">startActivityForResult()</a></code>&nbsp;(instead of&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#startActivity(android.content.Intent)">startActivity()</a></code>).</p>
<p style="text-align: justify;">For example, your app can start a camera app and receive the captured photo as a result. Or, you might start the People app in order for the user to select a contact and you'll receive the contact details as a result.</p>
<p style="text-align: justify;">Of course, the activity that responds must be designed to return a result. When it does, it sends the result as another&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>&nbsp;object. Your activity receives it in the&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#onActivityResult(int,%20int,%20android.content.Intent)">onActivityResult()</a></code>&nbsp;callback.</p>
<p class="note" style="text-align: justify;"><strong>Note:</strong>&nbsp;You can use explicit or implicit intents when you call&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,%20int)">startActivityForResult()</a></code>. When starting one of your own activities to receive a result, you should use an explicit intent to ensure that you receive the expected result.</p>
<h2 id="StartActivity" style="text-align: justify;">Start the Activity<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h2>
<p style="text-align: justify;">There's nothing special about the&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>&nbsp;object you use when starting an activity for a result, but you do need to pass an additional integer argument to the&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,%20int)">startActivityForResult()</a></code>&nbsp;method.</p>
<p style="text-align: justify;">The integer argument is a "request code" that identifies your request. When you receive the result&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>, the callback provides the same request code so that your app can properly identify the result and determine how to handle it.</p>
<p style="text-align: justify;">For example, here's how to start an activity that allows the user to pick a contact:</p>
<div style="text-align: justify;">
<div class="devsite-tabs-wrapper"><a href="https://developer.android.com/training/basics/intents/result#kotlin">KOTLIN</a><a href="https://developer.android.com/training/basics/intents/result#java">JAVA</a></div>
<section tabindex="0" role="tabpanel">
<pre class="lang-java" dir="ltr" translate="no"><span class="kwd">static</span> <span class="kwd">final</span> <span class="kwd">int</span><span class="pln"> PICK_CONTACT_REQUEST </span><span class="pun">=</span> <span class="lit">1</span><span class="pun">;</span><span class="pln"> &nbsp;</span><span class="com">// The request code</span><span class="pln"><br /></span><span class="pun">...</span><span class="pln"><br /></span><span class="kwd">private</span> <span class="kwd">void</span><span class="pln"> pickContact</span><span class="pun">()</span> <span class="pun">{<br /><br /></span><span class="typ"> Intent</span><span class="pln"> pickContactIntent </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">Intent</span><span class="pun">(</span><span class="typ">Intent</span><span class="pun">.</span><span class="pln">ACTION_PICK</span><span class="pun">,<br /></span> <span class="typ">Uri</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">"content://contacts"</span><span class="pun">));<br /></span><span class="pln"><br />&nbsp;pickContactIntent</span><span class="pun">.</span><span class="pln">setType</span><span class="pun">(</span><span class="typ">Phone</span><span class="pun">.</span><span class="pln">CONTENT_TYPE</span><span class="pun">);</span> <br /><span class="com"> //Show user only contacts w/ phone numbers</span><span class="pln"><br /> startActivityForResult</span><span class="pun">(</span><span class="pln">pickContactIntent</span><span class="pun">,<br /></span><span class="pln">  PICK_CONTACT_REQUEST</span><span class="pun">);<br /><br /></span><span class="pln"><br /></span><span class="pun">}</span><span class="pln"><br /></span></pre>
<div class="devsite-code-buttons-container">&nbsp;</div>
</section>
</div>
<h2 id="ReceiveResult" style="text-align: justify;">Receive the Result<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h2>
<p style="text-align: justify;">When the user is done with the subsequent activity and returns, the system calls your activity's<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#onActivityResult(int,%20int,%20android.content.Intent)">onActivityResult()</a></code>&nbsp;method. This method includes three arguments:</p>
<ul style="text-align: justify;">
<li>The request code you passed to&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,%20int)">startActivityForResult()</a></code>.</li>
<li>A result code specified by the second activity. This is either&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#RESULT_OK">RESULT_OK</a></code>&nbsp;if the operation was successful or&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/Activity.html#RESULT_CANCELED">RESULT_CANCELED</a></code>&nbsp;if the user backed out or the operation failed for some reason.</li>
<li>An&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>&nbsp;that carries the result data.</li>
</ul>
<p style="text-align: justify;">For example, here's how you can handle the result for the "pick a contact" intent:</p>
<div style="text-align: justify;">
<div class="devsite-tabs-wrapper"><a href="https://developer.android.com/training/basics/intents/result#kotlin">KOTLIN</a><a href="https://developer.android.com/training/basics/intents/result#java">JAVA</a></div>
<section tabindex="0" role="tabpanel">
<pre class="lang-java" dir="ltr" translate="no"><span class="lit">@Override</span><span class="pln"><br /></span><span class="kwd">protected</span> <span class="kwd">void</span><span class="pln"> onActivityResult</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> requestCode</span><span class="pun">,</span> <span class="kwd">int</span><span class="pln"> resultCode</span><span class="pun">,</span> <span class="typ">Intent</span><span class="pln"> data</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="com">// Check which request we're responding to</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span> <span class="pun">(</span><span class="pln">requestCode </span><span class="pun">==</span><span class="pln"> PICK_CONTACT_REQUEST</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Make sure the request was successful</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span> <span class="pun">(</span><span class="pln">resultCode </span><span class="pun">==</span><span class="pln"> RESULT_OK</span><span class="pun">)</span> <span class="pun">{<br /></span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// The user picked a contact.<br /></span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// The Intent's data Uri identifies which contact <br />               was selected.</span><span class="pln"><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">// Do something with the contact here<br />             (bigger example below)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">}</span><span class="pln"><br /></span></pre>
<div class="devsite-code-buttons-container">&nbsp;</div>
</section>
</div>
<p style="text-align: justify;">In this example, the result&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>&nbsp;returned by Android's Contacts or People app provides a content&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/net/Uri.html">Uri</a></code>&nbsp;that identifies the contact the user selected.</p>
<p style="text-align: justify;">In order to successfully handle the result, you must understand what the format of the result&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>&nbsp;will be. Doing so is easy when the activity returning a result is one of your own activities. Apps included with the Android platform offer their own APIs that you can count on for specific result data. For instance, the People app always returns a result with the content URI that identifies the selected contact, and the Camera app returns a&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/graphics/Bitmap.html">Bitmap</a></code>&nbsp;in the&nbsp;<code dir="ltr" translate="no">"data"</code>&nbsp;extra (see the class about&nbsp;<a href="https://developer.android.com/training/camera/index.html">Capturing Photos</a>).</p>
<h4 id="bonus:-read-the-contact-data" style="text-align: justify;">Bonus: Read the contact data<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h4>
<p style="text-align: justify;">The code above showing how to get a result from the People app doesn't go into details about how to actually read the data from the result, because it requires more advanced discussion about&nbsp;<a href="https://developer.android.com/guide/topics/providers/content-providers.html">content providers</a>. However, if you're curious, here's some more code that shows how to query the result data to get the phone number from the selected contact:</p>
<div style="text-align: justify;">
<div class="devsite-tabs-wrapper"><a href="https://developer.android.com/training/basics/intents/result#kotlin">KOTLIN</a><a href="https://developer.android.com/training/basics/intents/result#java">JAVA</a></div>
<section tabindex="0" role="tabpanel">
<pre class="lang-java" dir="ltr" translate="no"><span class="lit">@Override</span><span class="pln"><br /></span><span class="kwd">protected</span> <span class="kwd">void</span><span class="pln"> onActivityResult</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> requestCode</span><span class="pun">,</span> <span class="kwd">int</span><span class="pln"> resultCode</span><span class="pun">,<br /></span> <span class="typ">Intent</span><span class="pln"> resultIntent</span><span class="pun">)</span> <span class="pun">{<br /></span><span class="pln"><br />&nbsp; &nbsp; </span><span class="com">// Check which request it is that we're responding to</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span> <span class="pun">(</span><span class="pln">requestCode </span><span class="pun">==</span><span class="pln"> PICK_CONTACT_REQUEST</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Make sure the request was successful</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span> <span class="pun">(</span><span class="pln">resultCode </span><span class="pun">==</span><span class="pln"> RESULT_OK</span><span class="pun">)</span> <span class="pun">{<br /></span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Get the URI that points to the selected contact</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="typ">Uri</span><span class="pln"> contactUri </span><span class="pun">=</span><span class="pln"> resultIntent</span><span class="pun">.</span><span class="pln">getData</span><span class="pun">();<br /></span><span class="pln"><br />&nbsp;  &nbsp; &nbsp; </span><span class="com">// We only need the NUMBER column, because there will be<br />          only one row in the result.<br /></span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> projection </span><span class="pun">=</span> <span class="pun">{</span><span class="typ">Phone</span><span class="pun">.</span><span class="pln">NUMBER</span><span class="pun">};</span><span class="pln"><br /><br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="com">// Perform the query on the contact to get the NUMBER <br />          column.</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="com">// We don't need a selection or sort order (there's only one result for the given URI)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp;  </span><span class="com">// CAUTION: The query() method should be called from <br />          a separate thread to avoid blocking</span><span class="pln"><br />&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="com">// your app's UI thread. (For simplicity of the sample,<br />          this code doesn't do that.)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; </span><span class="com">// Consider using &lt;code&gt;&lt;a href="/reference/android/<br />         content/CursorLoader.html"&gt;CursorLoader&lt;/a&gt;&lt;/code&gt; <br />         to perform the query.<br /></span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Cursor</span><span class="pln"> cursor </span><span class="pun">=</span><span class="pln"> getContentResolver</span><span class="pun">()</span><span class="pln">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">query</span><span class="pun">(</span><span class="pln">contactUri</span><span class="pun">,</span><span class="pln"> projection</span><span class="pun">,</span> <span class="kwd">null</span><span class="pun">,</span> <span class="kwd">null</span><span class="pun">,</span> <span class="kwd">null</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cursor</span><span class="pun">.</span><span class="pln">moveToFirst</span><span class="pun">();</span><span class="pln"><br /><br />&nbsp; &nbsp; &nbsp;  </span><span class="com">// Retrieve the phone number from the NUMBER column</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> column </span><span class="pun">=</span><span class="pln"> cursor</span><span class="pun">.</span><span class="pln">getColumnIndex</span><span class="pun">(</span><span class="typ">Phone</span><span class="pun">.</span><span class="pln">NUMBER</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> number </span><span class="pun">=</span><span class="pln"> cursor</span><span class="pun">.</span><span class="pln">getString</span><span class="pun">(</span><span class="pln">column</span><span class="pun">);</span><span class="pln"><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Do something with the phone number...</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">}</span></pre>
<p>&nbsp;</p>
</section>
</div>
</div>
<h1 id="detect-when-users-start-or-end-an-activity" class="" style="text-align: justify;">Detect when users start or end an activity</h1>
<div class="devsite-article-body clearfix
      ">
    <p style="text-align: justify;">It might be necessary to design your app to identify when a user starts or stops a particular activity, such as walking, biking, or driving. For example, a mileage tracking app could start tracking miles when a user starts driving, or a messaging app could mute all conversations until the user stops driving.</p>
    <p style="text-align: justify;">The Activity Recognition Transition API can be used to detect changes in the user's activity. Your app subscribes to a transition in activities of interest and the API notifies your app only when needed. This page shows how to use the Activity Recognition Transition API, also called the Transition API for short.</p>
    <h2 id="setup" style="text-align: justify;">Set up your project<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h2>
    <p style="text-align: justify;">To use the Transition API in your app, you must declare a dependency to the&nbsp;<strong>Google Location and Activity Recognition</strong>&nbsp;API version 12.0.0 or higher and specify the&nbsp;<code dir="ltr" translate="no">com.google.android.gms.permission.ACTIVITY_RECOGNITION</code>&nbsp;permission in the app manifest.</p>
    <ol style="text-align: justify;">
        <li>To declare a dependency to the API, add a reference to the Google maven repository and add an implementation entry to&nbsp;<code dir="ltr" translate="no">com.google.android.gms:play-services-location:12.0.0</code>&nbsp;to the dependencies section of your app&nbsp;<code dir="ltr" translate="no">build.gradle</code>&nbsp;file. For more information, see&nbsp;<a href="https://developers.google.com/android/guides/setup">Set Up Google Play Services</a>.</li>
        <li>
            <p>To specify the&nbsp;<code dir="ltr" translate="no">com.google.android.gms.permission.ACTIVITY_RECOGNITION</code>&nbsp;permission, add a<a href="https://developer.android.com/guide/topics/manifest/uses-permission-element.html"><code dir="ltr" translate="no">&lt;uses-permission&gt;</code></a>&nbsp;element in the app manifest, as shown in the following example:</p>
        </li>
        <li>
            <p>&nbsp;</p>
            <pre class="" dir="ltr" translate="no"><code dir="ltr" translate="no"><span class="pln">&nbsp;</span><span class="tag">&lt;manifest</span> <span class="atn">xmlns:android</span><span class="pun">=</span><span class="atv">"http://schemas.</span></code></pre>
        </li>
        <li>
            <pre class="" dir="ltr" translate="no"><code dir="ltr" translate="no"><span class="atv">android.com/apk/res/android"</span><span class="atn">package</span><span class="pun">=</span><span class="atv">"com.example.myapp"</span><span class="tag">&gt;</span><span class="pln"><br /><br />&nbsp; &nbsp;</span><span class="tag">&lt;uses-permission</span> </code></pre>
        </li>
        <li>
            <pre class="" dir="ltr" translate="no"><code dir="ltr" translate="no"><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"com.google.android.gms.permission.</span></code></pre>
        </li>
        <li>
            <pre class="" dir="ltr" translate="no"><code dir="ltr" translate="no"><span class="atv">ACTIVITY_RECOGNITION"</span> <span class="tag">/&gt;</span><span class="pln"><br />&nbsp; &nbsp;&hellip;<br />&nbsp;</span><span class="tag">&lt;/manifest&gt;</span><span class="pln"><br /></span></code></pre>
            <div class="devsite-code-buttons-container">&nbsp;</div>
        </li>
    </ol>
    <h2 id="register" style="text-align: justify;">Register for activity transition updates<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h2>
    <p style="text-align: justify;">To start receiving notifications about activity transitions, you must implement the following:</p>
    <ul style="text-align: justify;">
        <li>An&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransitionRequest"><code dir="ltr" translate="no">ActivityTransitionRequest</code></a>&nbsp;object that specifies the type of activity and transition.</li>
        <li>A&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/PendingIntent.html">PendingIntent</a></code>&nbsp;callback where your app receives notifications. For more information, see&nbsp;<a href="https://developer.android.com/guide/components/intents-filters.html#PendingIntent">Using a pending intent</a>.</li>
    </ul>
    <p style="text-align: justify;">To create the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransitionRequest"><code dir="ltr" translate="no">ActivityTransitionRequest</code></a>&nbsp;object, you must create a list of&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition"><code dir="ltr" translate="no">ActivityTransition</code></a>&nbsp;objects, which represent the transition that you want to receive notifications about. An&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition"><code dir="ltr" translate="no">ActivityTransition</code></a>&nbsp;object includes the following data:</p>
    <ul style="text-align: justify;">
        <li>An activity type, represented by the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity"><code dir="ltr" translate="no">DetectedActivity</code></a>&nbsp;class. The Transition API supports the following activities:
            <ul>
                <li><a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity.html#IN_VEHICLE"><code dir="ltr" translate="no">IN_VEHICLE</code></a></li>
                <li><a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity.html#ON_BICYCLE"><code dir="ltr" translate="no">ON_BICYCLE</code></a></li>
                <li><a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity.html#RUNNING"><code dir="ltr" translate="no">RUNNING</code></a></li>
                <li><a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity.html#STILL"><code dir="ltr" translate="no">STILL</code></a></li>
                <li><a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity.html#WALKING"><code dir="ltr" translate="no">WALKING</code></a></li>
            </ul>
        </li>
        <li>A transition type of&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition#ACTIVITY_TRANSITION_ENTER"><code dir="ltr" translate="no">ACTIVITY_TRANSITION_ENTER</code></a>&nbsp;or&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition#ACTIVITY_TRANSITION_EXIT"><code dir="ltr" translate="no">ACTIVITY_TRANSITION_EXIT</code></a>. For more information, refer to the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition"><code dir="ltr" translate="no">ActivityTransition</code></a>&nbsp;class.</li>
    </ul>
    <p style="text-align: justify;">The following code shows how to create a list of&nbsp;<code dir="ltr" translate="no">ActivityTransition</code>&nbsp;objects:</p>
    <div style="text-align: justify;">
        <div class="devsite-tabs-wrapper"><a href="https://developer.android.com/guide/topics/location/transitions#kotlin">KOTLIN</a><a href="https://developer.android.com/guide/topics/location/transitions#java">JAVA</a></div>
        <section tabindex="0" role="tabpanel">
            <pre class="lang-java" dir="ltr" translate="no"><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">ActivityTransition</span><span class="pun">&gt;</span><span class="pln"> transitions </span><span class="pun">=</span> <span class="kwd">new</span> <span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span><span class="pln"><br /><br />transitions</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">ActivityTransition</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">setActivityType</span><span class="pun">(</span><span class="typ">DetectedActivity</span><span class="pun">.</span><span class="pln">IN_VEHICLE</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">setActivityTransition</span><span class="pun">(</span><span class="typ">ActivityTransition</span><span class="pun">.<br /></span><span class="pln">           ACTIVITY_TRANSITION_ENTER</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">build</span><span class="pun">());</span><span class="pln"><br /><br />transitions</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">ActivityTransition</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.<br /></span><span class="pln">setActivityType</span><span class="pun">(</span><span class="typ">DetectedActivity</span><span class="pun">.</span><span class="pln">IN_VEHICLE</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">setActivityTransition</span><span class="pun">(</span><span class="typ">ActivityTransition<br /></span><span class="pun">   .</span><span class="pln">ACTIVITY_TRANSITION_EXIT</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">build</span><span class="pun">());</span><span class="pln"><br /><br />transitions</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">ActivityTransition</span><span class="pun">.</span><span class="typ">Builder</span><span class="pun">()</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">setActivityType</span><span class="pun">(</span><span class="typ">DetectedActivity</span><span class="pun">.</span><span class="pln">WALKING</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">setActivityTransition</span><span class="pun">(</span><span class="typ">ActivityTransition<br /></span><span class="pun">     .</span><span class="pln">ACTIVITY_TRANSITION_EXIT</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">build</span><span class="pun">());</span><span class="pln"><br /></span></pre>
            <div class="devsite-code-buttons-container">&nbsp;</div>
        </section>
    </div>
    <p style="text-align: justify;">You can create an&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransitionRequest"><code dir="ltr" translate="no">ActivityTransitionRequest</code></a>&nbsp;object by passing the list of&nbsp;<code dir="ltr" translate="no">ActivityTransitions</code>&nbsp;to the<code dir="ltr" translate="no">ActivityTransitionRequest</code>&nbsp;class, as shown in the following example:</p>
    <div style="text-align: justify;">
        <div class="devsite-tabs-wrapper"><a href="https://developer.android.com/guide/topics/location/transitions#kotlin">KOTLIN</a><a href="https://developer.android.com/guide/topics/location/transitions#java">JAVA</a></div>
        <section tabindex="0" role="tabpanel">
            <pre class="lang-java" dir="ltr" translate="no"><span class="typ">ActivityTransitionRequest</span><span class="pln"> request </span><span class="pun">=</span> <span class="kwd">new</span> <br /><span class="typ">ActivityTransitionRequest</span><span class="pun">(</span><span class="pln">transitions</span><span class="pun">);</span><span class="pln"><br /></span></pre>
            <div class="devsite-code-buttons-container">&nbsp;</div>
        </section>
    </div>
    <p style="text-align: justify;">You can register for activity transition updates by passing your instance of&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransitionRequest"><code dir="ltr" translate="no">ActivityTransitionRequest</code></a>&nbsp;and your&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/PendingIntent.html">PendingIntent</a></code>&nbsp;object to the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityRecognitionClient#requestActivityTransitionUpdates(com.google.android.gms.location.ActivityTransitionRequest,%20android.app.PendingIntent)"><code dir="ltr" translate="no">requestActivityTransitionUpdates()</code></a>&nbsp;method. The&nbsp;<code dir="ltr" translate="no">requestActivityTransitionUpdates()</code>&nbsp;method returns a&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/tasks/Task"><code dir="ltr" translate="no">Task</code></a>&nbsp;object that you can check for success or failure, as shown in the following code example:</p>
    <div style="text-align: justify;">
        <div class="devsite-tabs-wrapper"><a href="https://developer.android.com/guide/topics/location/transitions#kotlin">KOTLIN</a><a href="https://developer.android.com/guide/topics/location/transitions#java">JAVA</a></div>
        <section tabindex="0" role="tabpanel">
            <pre class="lang-java" dir="ltr" translate="no"><span class="com">// myPendingIntent is the instance of PendingIntent<br /> where the app receives callbacks.</span><span class="pln"><br /></span><span class="typ">Task</span><span class="pun">&lt;</span><span class="typ">Void</span><span class="pun">&gt;</span><span class="pln"> task </span><span class="pun">=</span> <span class="typ">ActivityRecognition</span><span class="pun">.</span><span class="pln">getClient</span><span class="pun">(</span><span class="pln">context</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">requestActivityTransitionUpdates</span><span class="pun">(</span><span class="pln">request</span><span class="pun">,</span><span class="pln"> myPendingIntent</span><span class="pun">);</span><span class="pln"><br /><br />task</span><span class="pun">.</span><span class="pln">addOnSuccessListener</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">OnSuccessListener</span><span class="pun">&lt;</span><span class="typ">Void</span><span class="pun">&gt;()</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">(</span><span class="typ">Void</span><span class="pln"> result</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Handle success</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">);</span><span class="pln"><br /><br />task</span><span class="pun">.</span><span class="pln">addOnFailureListener</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">OnFailureListener</span><span class="pun">()</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> onFailure</span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Handle error</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">);</span><span class="pln"><br /></span></pre>
            <div class="devsite-code-buttons-container">&nbsp;</div>
        </section>
    </div>
    <p style="text-align: justify;">After successfully registering for activity transition updates, your app receives notifications in the registered&nbsp;<code dir="ltr" translate="no">PendingIntent</code>.</p>
    <h2 id="process" style="text-align: justify;">Process activity transition events<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h2>
    <p style="text-align: justify;">When the requested activity transition occurs, you app receives an&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/Intent.html">Intent</a></code>&nbsp;callback. An<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransitionResult"><code dir="ltr" translate="no">ActivityTransitionResult</code></a>&nbsp;object can be extracted from the&nbsp;<code dir="ltr" translate="no">Intent</code>, which includes a list of<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransitionEvent"><code dir="ltr" translate="no">ActivityTransitionEvent</code></a>&nbsp;objects. The events are ordered in chronological order, for example, if an app requests for the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/DetectedActivity.html#IN_VEHICLE"><code dir="ltr" translate="no">IN_VEHICLE</code></a>&nbsp;activity type on the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition#ACTIVITY_TRANSITION_ENTER"><code dir="ltr" translate="no">ACTIVITY_TRANSITION_ENTER</code></a>&nbsp;and<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityTransition.html#ACTIVITY_TRANSITION_EXIT"><code dir="ltr" translate="no">ACTIVITY_TRANSITION_EXIT</code></a>&nbsp;</p>
    <p style="text-align: justify;">transitions, then it receives an&nbsp;<code dir="ltr" translate="no">ActivityTransitionEvent</code>&nbsp;object when the user starts driving, and another one when the user transitions to any other activity.</p>
    <p style="text-align: justify;">You can implement your callback by creating a subclass of&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a></code>&nbsp;and implementing the&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,%20android.content.Intent)">onReceive()</a></code>&nbsp;method to get the list of activity transition events. For more information, see&nbsp;<a href="https://developer.android.com/guide/components/broadcasts.html">Broadcasts</a>. The following example shows how to implement the&nbsp;<code dir="ltr" translate="no">onReceive()</code>&nbsp;method:</p>
    <div style="text-align: justify;">
        <div class="devsite-tabs-wrapper"><a href="https://developer.android.com/guide/topics/location/transitions#kotlin">KOTLIN</a><a href="https://developer.android.com/guide/topics/location/transitions#java">JAVA</a></div>
        <section tabindex="0" role="tabpanel">
            <pre class="lang-java" dir="ltr" translate="no"><span class="lit">@Override</span><span class="pln"><br /></span><span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> onReceive</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span> <span class="typ">Intent</span><span class="pln"> intent</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">if</span> <span class="pun">(</span><span class="typ">ActivityTransitionResult</span><span class="pun">.</span><span class="pln">hasResult</span><span class="pun">(</span><span class="pln">intent</span><span class="pun">))</span> <span class="pun">{<br /></span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">ActivityTransitionResult</span><span class="pln"> result </span><span class="pun">=</span> <br /><span class="typ">    ActivityTransitionResult</span><span class="pun">.</span><span class="pln">extractResult</span><span class="pun">(</span><span class="pln">intent</span><span class="pun">);</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span> <span class="pun">(</span><span class="typ">ActivityTransitionEvent</span><span class="pln"> event </span><span class="pun">:</span><span class="pln"> <br />     result</span><span class="pun">.</span><span class="pln">getTransitionEvents</span><span class="pun">())</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// chronological sequence of events....</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">}</span><span class="pln"><br /></span></pre>
            <div class="devsite-code-buttons-container">&nbsp;</div>
        </section>
    </div>
    <aside class="note"><strong>Note:</strong>&nbsp;The latency of event detection might vary by device.</aside>
    <h2 id="deregister" style="text-align: justify;">Deregister for activity transition updates<button class="devsite-heading-link button-flat material-icons" role="button" data-title="Copy link to this section"></button></h2>
    <p style="text-align: justify;">You can deregister for activity transition updates by calling the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityRecognitionClient#removeActivityTransitionUpdates(android.app.PendingIntent)"><code dir="ltr" translate="no">removeActivityTransitionUpdates()</code></a>method of the&nbsp;<a href="https://developers.google.com/android/reference/com/google/android/gms/location/ActivityRecognitionClient"><code dir="ltr" translate="no">ActivityRecognitionClient</code></a>&nbsp;and passing your&nbsp;<code dir="ltr" translate="no"><a href="https://developer.android.com/reference/android/app/PendingIntent.html">PendingIntent</a></code>&nbsp;object as a parameter, as shown in the following example:</p>
    <div>
        <div class="devsite-tabs-wrapper" style="text-align: justify;"><a href="https://developer.android.com/guide/topics/location/transitions#kotlin">KOTLIN</a><a href="https://developer.android.com/guide/topics/location/transitions#java">JAVA</a></div>
        <section tabindex="0" role="tabpanel">
            <pre class="lang-java" dir="ltr" translate="no"><span class="com">// myPendingIntent is the instance of PendingIntent<br />   where the app receives callbacks.</span><span class="pln"><br /></span><span class="typ">Task</span><span class="pun">&lt;</span><span class="typ">Void</span><span class="pun">&gt;</span><span class="pln"> task </span><span class="pun">=</span> <span class="typ">ActivityRecognition</span><span class="pun">.</span><span class="pln">getClient</span><span class="pun">(</span><span class="pln">context</span><span class="pun">)</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">.</span><span class="pln">removeActivityTransitionUpdates</span><span class="pun">(</span><span class="pln">myPendingIntent</span><span class="pun">);</span><span class="pln"><br /><br />task</span><span class="pun">.</span><span class="pln">addOnSuccessListener</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">OnSuccessListener</span><span class="pun">&lt;</span><span class="typ">Void</span><span class="pun">&gt;()</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">(</span><span class="typ">Void</span><span class="pln"> result</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myPendingIntent</span><span class="pun">.</span><span class="pln">cancel</span><span class="pun">();</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">);</span><span class="pln"><br /><br />task</span><span class="pun">.</span><span class="pln">addOnFailureListener</span><span class="pun">(</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="kwd">new</span> <span class="typ">OnFailureListener</span><span class="pun">()</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">public</span> <span class="kwd">void</span><span class="pln"> onFailure</span><span class="pun">(</span><span class="typ">Exception</span><span class="pln"> e</span><span class="pun">)</span> <span class="pun">{</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Log</span><span class="pun">.</span><span class="pln">e</span><span class="pun">(</span><span class="str">"MYCOMPONENT"</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">());</span><span class="pln"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br />&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br /></span><span class="pun">);</span><span class="pln"><br /></span></pre>
            <div class="devsite-code-buttons-container" style="text-align: justify;">&nbsp;</div>
        </section>
    </div>
</div>